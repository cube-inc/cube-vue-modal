/**
 * @module cube-vue-modal
 * @version 0.3.0
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).CubeModal={})}(this,(function(t){"use strict";var e=function(t){return"object"==typeof t?null!==t:"function"==typeof t},n=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t},o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}));var r=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})).document,s=e(r)&&e(r.createElement),a=!i&&!o((function(){return 7!=Object.defineProperty((t="div",s?r.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),l=Object.defineProperty,c={f:i?Object.defineProperty:function(t,o,i){if(n(t),o=function(t,n){if(!e(t))return t;var o,i;if(n&&"function"==typeof(o=t.toString)&&!e(i=o.call(t)))return i;if("function"==typeof(o=t.valueOf)&&!e(i=o.call(t)))return i;if(!n&&"function"==typeof(o=t.toString)&&!e(i=o.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(o,!0),n(i),a)try{return l(t,o,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[o]=i.value),t}}.f,u=Function.prototype,d=/^\s*function ([^ (]*)/;function f(t,e,n,o,i,r,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);const u="function"==typeof n?n.options:n;let d;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,i&&(u.functional=!0)),o&&(u._scopeId=o),r?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(r)},u._ssrRegister=d):e&&(d=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),d)if(u.functional){const t=u.render;u.render=function(e,n){return d.call(n),t(e,n)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,d):[d]}return n}"name"in u||i&&c(u,"name",{configurable:!0,get:function(){try{return(""+this).match(d)[1]}catch(t){return""}}});var h={props:{name:{type:String,default:"animation"}}},p=function(){var t=this.$createElement;return(this._self._c||t)("transition",this._g({attrs:{name:this.name,"enter-class":this.name+"-enter-from","leave-class":this.name+"-leave-from"}},this.$listeners),[this._t("default")],2)};p._withStripped=!0;var m=f({render:p,staticRenderFns:[]},void 0,h,void 0,!1,void 0,!1,void 0,void 0,void 0),v=function(){var t=this.$createElement,e=this._self._c||t;return e("button",this._g({staticClass:"modal-dialog-close"},this.$listeners),[e("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"77.429",height:"77.417",viewBox:"0 0 77.429 77.417"}},[e("path",{attrs:{d:"M13.721-3.906a4.377,4.377,0,0,0,0,6.152,4.483,4.483,0,0,0,6.2,0L51.172-29l31.25,31.25a4.436,4.436,0,0,0,6.2,0,4.422,4.422,0,0,0,0-6.152l-31.25-31.3,31.25-31.25a4.377,4.377,0,0,0,0-6.152,4.391,4.391,0,0,0-6.2,0l-31.25,31.25-31.25-31.25a4.347,4.347,0,0,0-6.2,0,4.422,4.422,0,0,0,0,6.152l31.25,31.25Z",transform:"translate(-12.457 73.908)"}})])])};v._withStripped=!0;var g=f({render:v,staticRenderFns:[]},void 0,{},void 0,!1,void 0,!1,void 0,void 0,void 0),y={name:"CubeModal",components:{ModalTransition:m,ButtonClose:g},props:{value:{type:Boolean,default:!1},transitionName:{type:String,default:"animate"},target:{type:[String,Element],default:function(){return document.body}},closeButton:{type:Boolean,default:!0}},data:function(){return this.lastFocus=null,this.touchstartY=null,this.touchmoveY=null,this.isScrollAtTop=!1,this.closeThreshold=null,{opened:!1,willClose:!1}},computed:{targetElement:function(){return this.target instanceof Element?this.target:document.querySelector(this.target)},transitionEnterActiveClassName:function(){return"".concat(this.transitionName,"-enter-active")}},watch:{value:function(t){this.opened!==t&&(t?this.open():this.close())}},methods:{onTouchStart:function(t){var e=this.$refs,n=e.modal,o=e.container;this.willClose=!1,this.touchstartY=this.touchmoveY=t.layerY,this.isScrollAtTop=0===o.scrollTop,this.isScrollAtBottom=o.scrollHeight-o.scrollTop===o.clientHeight,this.closeThreshold=window.innerHeight/2,n.classList.remove(this.transitionEnterActiveClassName)},onTouchMove:function(t){if(this.isScrollAtTop||this.isScrollAtBottom){this.willClose=!1;var e=t.layerY-this.touchstartY;this.isScrollAtTop&&e>=0&&(t.preventDefault(),this.$refs.dialog.style.transform="translateY(".concat(e,"px)"),this.willClose=e>=this.closeThreshold&&t.layerY>=this.touchmoveY),this.isScrollAtBottom&&e<0&&(t.preventDefault(),this.$refs.container.style.transform="translateY(".concat(.4*e,"px)")),this.touchmoveY=t.layerY}},onTouchEnd:function(t){var e=this,n=this.$refs,o=n.modal,i=n.dialog,r=n.container;this.willClose?(this.willClose=!1,i.style.transform="",this.close()):(this.$once("dialog-transitionend",(function(){o.classList.remove(e.transitionEnterActiveClassName)})),o.classList.add(this.transitionEnterActiveClassName),i.style.transform="",r.style.transform="")},lockScroll:function(){document.body.classList.add("modal-scroll-lock")},unlockScroll:function(){document.body.classList.remove("modal-scroll-lock")},open:function(){var t=this;return this.lastFocus=document.activeElement,new Promise((function(e){t.$once("after-enter",(function(){t.$refs.backdrop.focus(),t.$emit("opened",t),e()})),t.lockScroll(),t.opened=!0,!0!==t.value&&t.$emit("input",!0),t.$emit("open",t)}))},close:function(){var t=this;return new Promise((function(e){t.$once("after-leave",(function(){t.lastFocus.focus(),t.$emit("closed",t),e()})),t.opened=!1,t.unlockScroll(),!1!==t.value&&t.$emit("input",!1),t.$emit("close",t)}))},toggle:function(){return this.opened?this.close():this.open()}},mounted:function(){this.targetElement.appendChild(this.$el)},beforeDestroy:function(){this.opened&&this.unlockScroll()}},_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ModalTransition",{attrs:{name:t.transitionName},on:{"after-enter":function(e){return t.$emit("after-enter")},"after-leave":function(e){return t.$emit("after-leave")}}},[t.opened?n("div",t._b({ref:"modal",staticClass:"modal"},"div",t.$attrs,!1),[n("div",{ref:"backdrop",staticClass:"modal-backdrop",attrs:{tabindex:"0"},on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),t.close(e))}}}),t._v(" "),n("div",{ref:"dialog",staticClass:"modal-dialog",attrs:{role:"dialog"},on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd,transitionend:function(e){return t.$emit("dialog-transitionend")}}},[t.closeButton?n("ButtonClose",{on:{click:t.close}}):t._e(),t._v(" "),n("div",{ref:"container",staticClass:"modal-dialog-container"},[t._t("default")],2)],1)]):t._e()])};_._withStripped=!0;var C=f({render:_,staticRenderFns:[]},void 0,y,void 0,!1,void 0,!1,void 0,void 0,void 0);C.install=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.name,o=void 0===n?C.name:n;t.component(o,C)},t.CubeModalButtonClose=g,t.CubeModalTransition=m,t.default=C,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=cube-vue-modal.umd.js.map
